# ЕСУТД SOAP-сервис

Синхронный SOAP-сервис для приема данных о трудовой деятельности от Единой системы учета трудовых договоров (ЕСУТД).

## Описание проекта

Данный сервис представляет собой Spring Boot приложение, выполняющее роль синхронного SOAP-сервиса (провайдера) для приема информации из системы ЕСУТД. 

Основная задача сервиса — принимать стандартизированные SOAP-сообщения от ЕСУТД, содержащие данные о различных действиях с трудовыми договорами и связанной информацией (создание, изменение, расторжение договоров, информация по сотрудникам, справочные данные), и сохранять эти данные в нашу внутреннюю базу данных.

## Технический стек

- Java 17
- Spring Boot 2.7.17
- Spring Web Services
- Spring Data JPA
- PostgreSQL
- Maven

## Функциональность

Сервис поддерживает следующие операции:

1. **CREATE_CONTRACT** - создание нового трудового договора
2. **UPDATE_CONTRACT** - обновление существующего трудового договора
3. **TERMINATE_CONTRACT** - расторжение трудового договора
4. **UPDATE_EMPLOYEE** - обновление данных о сотруднике
5. **UPDATE_EMPLOYER** - обновление данных о работодателе

## Структура проекта

```
esutd-soap-service/
├── src/
│   ├── main/
│   │   ├── java/
│   │   │   └── kz/gov/example/esutd/soap/
│   │   │       ├── config/           # Конфигурация приложения
│   │   │       ├── controller/       # SOAP эндпоинты
│   │   │       ├── model/            # Модели данных
│   │   │       │   └── entity/       # JPA сущности
│   │   │       ├── repository/       # Репозитории для работы с БД
│   │   │       ├── service/          # Бизнес-логика
│   │   │       └── util/             # Утилитные классы
│   │   └── resources/
│   │       ├── application.properties # Настройки приложения
│   │       ├── xsd/                  # XSD схемы для SOAP
│   │       └── wsdl/                 # WSDL файлы
│   └── test/                         # Тесты
├── pom.xml                           # Конфигурация Maven
└── README.md                         # Документация
```

## Установка и запуск

### Предварительные требования

- JDK 17
- Maven 3.6+
- PostgreSQL 12+

### Шаги по установке

1. Клонировать репозиторий:
```bash
git clone <repository-url>
cd esutd-soap-service
```

2. Настроить подключение к базе данных в `src/main/resources/application.properties`:
```properties
spring.datasource.url=jdbc:postgresql://localhost:5432/esutd_db
spring.datasource.username=your_username
spring.datasource.password=your_password
```

3. Собрать проект:
```bash
mvn clean install
```

4. Запустить приложение:
```bash
mvn spring-boot:run
```

## Тестирование

Для тестирования SOAP-сервиса можно использовать SoapUI или Postman. Сервис доступен по адресу:
```
http://localhost:8080/ws/laborContract.wsdl
```

## Дополнительная информация

- Взаимодействие с ЕСУТД происходит в рамках защищенной сети ЕТС ГОУ, предположительно через Шлюз электронного правительства (ШЭП).
- Для работы со справочниками необходимо получить файлы справочных данных от ЕСУТД и загрузить их в систему.
- Текущая реализация верификации транспортной подписи является заглушкой и требует интеграции с реальной реализацией.
